<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<!-- 급여 명세서 모달 -->
<div class="modal fade" id="payDetailModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-xl">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">명세서 조회</h5>
        <div class="d-flex gap-2">
          <button type="button" class="btn btn-secondary me-2" id="btnPayPrint">인쇄</button>
          <button type="button" class="btn btn-dark me-2" id="btnPayExcel">Excel</button>
          <button type="button" class="btn-close me-2" data-bs-dismiss="modal" aria-label="닫기"></button>
        </div>
      </div>

      <div class="modal-body">

<!-- <section class="p-3">
  제목부
  <div class="d-flex justify-content-between align-items-end mb-2">
    <h4>2025/10 1차수 (급여)</h4>
    <small th:text="|지급일자 : ${#temporals.format(list.payDate, 'yyyy/MM/dd')}|">지급일자 : 2025/10/15</small>
  </div>

  <div class="table-responsive">
    <table class="table table-bordered table-sm align-middle text-end">
      <colgroup>
        <col style="width:60px;">No.
        <col style="width:90px;">사번
        <col style="width:90px;">성명
        <col style="width:120px;">부서
        <col style="width:120px;">직위
        지급
        <col span="6">기본급 ~ 출산보육수당 (원하는 만큼)
        <col style="width:110px;">지급총액
        공제
        <col span="5">소득세 ~ 고용보험 (원하는 만큼)
        <col style="width:110px;">공제총액
        <col style="width:110px;">실지급
      </colgroup>

      헤더
      <thead class="table-light text-center">
        <tr>
          <th rowspan="2">No</th>
          <th rowspan="2">사원번호</th>
          <th rowspan="2">성명</th>
          <th rowspan="2">부서명</th>
          <th rowspan="2">직위/직급명</th>

          <th colspan="6">지급</th>
          <th rowspan="2">지급총액</th>

          <th colspan="5">공제</th>
          <th rowspan="2">공제총액</th>
          <th rowspan="2">실지급액</th>
        </tr>
        <tr>
          지급 항목 라벨들: 필요에 맞게 수정
          <th>기본급</th>
          <th>부양가족수당</th>
          <th>식대</th>
          <th>차량유지비</th>
          <th>연차수당</th>
          <th>출산보육수당</th>

          공제 항목 라벨들: 필요에 맞게 수정
          <th>소득세</th>
          <th>주민세</th>
          <th>국민연금</th>
          <th>건강보험</th>
          <th>고용보험</th>
        </tr>
      </thead>

      본문
      <tbody>
        <tr th:each="d, stat : ${list.details}">
          <td class="text-center" th:text="${stat.index + 1}">1</td>
          <td class="text-start" th:text="${d.empCode}">2021-001</td>
          <td class="text-start" th:text="${d.empName}">홍길동</td>
          <td class="text-start" th:text="${d.deptName}">총무팀</td>
          <td class="text-start" th:text="${d.posName}">과장</td>

          지급(예: all01~all06) 0이면 공백
          <td th:text="${d.all01 == null or d.all01 == 0} ? '' : ${#numbers.formatInteger(d.all01,3,'COMMA')}">0</td>
          <td th:text="${d.all02 == null or d.all02 == 0} ? '' : ${#numbers.formatInteger(d.all02,3,'COMMA')}">0</td>
          <td th:text="${d.all03 == null or d.all03 == 0} ? '' : ${#numbers.formatInteger(d.all03,3,'COMMA')}">0</td>
          <td th:text="${d.all04 == null or d.all04 == 0} ? '' : ${#numbers.formatInteger(d.all04,3,'COMMA')}">0</td>
          <td th:text="${d.all05 == null or d.all05 == 0} ? '' : ${#numbers.formatInteger(d.all05,3,'COMMA')}">0</td>
          <td th:text="${d.all06 == null or d.all06 == 0} ? '' : ${#numbers.formatInteger(d.all06,3,'COMMA')}">0</td>

          지급총액
          <td class="fw-semibold"
              th:text="${#numbers.formatInteger(d.allTotal ?: 0,3,'COMMA')}">0</td>

          공제(예: ded01~ded05) 0이면 공백
          <td th:text="${d.ded01 == null or d.ded01 == 0} ? '' : ${#numbers.formatInteger(d.ded01,3,'COMMA')}">0</td>
          <td th:text="${d.ded02 == null or d.ded02 == 0} ? '' : ${#numbers.formatInteger(d.ded02,3,'COMMA')}">0</td>
          <td th:text="${d.ded03 == null or d.ded03 == 0} ? '' : ${#numbers.formatInteger(d.ded03,3,'COMMA')}">0</td>
          <td th:text="${d.ded04 == null or d.ded04 == 0} ? '' : ${#numbers.formatInteger(d.ded04,3,'COMMA')}">0</td>
          <td th:text="${d.ded05 == null or d.ded05 == 0} ? '' : ${#numbers.formatInteger(d.ded05,3,'COMMA')}">0</td>

          공제총액 / 실지급
          <td class="fw-semibold"
              th:text="${#numbers.formatInteger(d.dedTotal ?: 0,3,'COMMA')}">0</td>
          <td class="fw-bold text-primary"
              th:text="${#numbers.formatInteger(d.netPay ?: 0,3,'COMMA')}">0</td>
        </tr>
      </tbody>

      합계
      <tfoot class="table-light">
        <tr class="fw-semibold">
          <td colspan="5" class="text-center">총합계</td>

          지급 합계: 서비스에서 채운 allSums 맵 사용 (키: 'ALL_01' ~)
          <td th:text="${#numbers.formatInteger(list.allSums['ALL_01'] ?: 0,3,'COMMA')}">0</td>
          <td th:text="${#numbers.formatInteger(list.allSums['ALL_02'] ?: 0,3,'COMMA')}">0</td>
          <td th:text="${#numbers.formatInteger(list.allSums['ALL_03'] ?: 0,3,'COMMA')}">0</td>
          <td th:text="${#numbers.formatInteger(list.allSums['ALL_04'] ?: 0,3,'COMMA')}">0</td>
          <td th:text="${#numbers.formatInteger(list.allSums['ALL_05'] ?: 0,3,'COMMA')}">0</td>
          <td th:text="${#numbers.formatInteger(list.allSums['ALL_06'] ?: 0,3,'COMMA')}">0</td>

          <td th:text="${#numbers.formatInteger(list.payTotalSum ?: 0,3,'COMMA')}">0</td>

          공제 합계: dedSums 맵 (키: 'DED_01' ~)
          <td th:text="${#numbers.formatInteger(list.dedSums['DED_01'] ?: 0,3,'COMMA')}">0</td>
          <td th:text="${#numbers.formatInteger(list.dedSums['DED_02'] ?: 0,3,'COMMA')}">0</td>
          <td th:text="${#numbers.formatInteger(list.dedSums['DED_03'] ?: 0,3,'COMMA')}">0</td>
          <td th:text="${#numbers.formatInteger(list.dedSums['DED_04'] ?: 0,3,'COMMA')}">0</td>
          <td th:text="${#numbers.formatInteger(list.dedSums['DED_05'] ?: 0,3,'COMMA')}">0</td>

          <td th:text="${#numbers.formatInteger(list.dedTotalSum ?: 0,3,'COMMA')}">0</td>
          <td th:text="${#numbers.formatInteger(list.netPaySum ?: 0,3,'COMMA')}">0</td>
        </tr>
      </tfoot>
    </table>
  </div>
</section> -->
[[${list}]]
[[${list.payYm}]]
            <table class="table table-sm table-bordered align-middle mb-0">
              <tbody id="dedSumsBody">
             <td th:text="${list.payYm}"></td>
             <tr th:each="salaryDetail, stat : ${list.details}">
		      <td th:text="${stat.index + 1}">1</td>
		      <td th:text="${salaryDetail.all01}">0001</td>
		      <td th:text="${salaryDetail.all02}">홍길동</td>
		      <td th:text="${salaryDetail.all03}">총무</td>
		    </tr>
              </tbody>
            </table>
          </div>

        </div>
      </div>
    </div>

</body>
</html>
